# ARVO2.0 Architecture

## ğŸ—ï¸ Overall Structure

ARVO2.0ëŠ” C ì–¸ì–´ í”„ë¡œì íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ê³  Dockerizeí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

```
ARVO2.0/
â”œâ”€â”€ build_agent/           # í•µì‹¬ ë¹Œë“œ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ main.py           # ë©”ì¸ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ agents/           # LLM ê¸°ë°˜ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ tools/            # C ë¹Œë“œ ë„êµ¬ë“¤
â”‚   â””â”€â”€ utils/            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
â”œâ”€â”€ output/               # ë¹Œë“œ ê²°ê³¼ë¬¼ ì €ì¥
â”œâ”€â”€ utils/repo/           # í´ë¡ ëœ ë ˆí¬ì§€í† ë¦¬ ì €ì¥
â””â”€â”€ [í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤]
```

---

## ğŸ“‚ ë””ë ‰í† ë¦¬ë³„ ìƒì„¸ êµ¬ì¡°

### **1. build_agent/** - í•µì‹¬ ë¹Œë“œ ì—ì´ì „íŠ¸

#### **main.py** (180ì¤„) - ë©”ì¸ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
```
ì—­í• : ì „ì²´ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ë ˆí¬ì§€í† ë¦¬ ë‹¤ìš´ë¡œë“œ               â”‚
â”‚ 2. Sandbox ìƒì„±                      â”‚
â”‚ 3. Configuration Agent ì‹¤í–‰          â”‚
â”‚ 4. Dockerfile ìƒì„±                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì£¼ìš” í•¨ìˆ˜:
- download_repo()      : GitHubì—ì„œ ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
- move_files_to_repo() : íŒŒì¼ êµ¬ì¡° ì¬êµ¬ì„±
- main()               : ì „ì²´ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
```

**ì‹¤í–‰ í”Œë¡œìš°:**
```python
main()
  â”œâ”€> download_repo(root_path, full_name, sha)
  â”‚     â”œâ”€> git clone https://github.com/{full_name}.git
  â”‚     â””â”€> git checkout {sha}
  â”‚
  â”œâ”€> Sandbox("gcr.io/oss-fuzz-base/base-builder", ...)
  â”‚     â””â”€> Docker ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹œì‘
  â”‚
  â”œâ”€> Configuration(sandbox, ...).run()
  â”‚     â””â”€> LLMì´ ë¹Œë“œ ë°©ë²• ê²°ì • ë° ì‹¤í–‰
  â”‚
  â””â”€> integrate_dockerfile(output_path)
        â””â”€> ìµœì¢… Dockerfile ìƒì„±
```

---

### **2. build_agent/agents/** - LLM ê¸°ë°˜ ì—ì´ì „íŠ¸

#### **configuration.py** (133ì¤„) - C ë¹Œë“œ ì„¤ì • ì—ì´ì „íŠ¸
```
ì—­í• : GPT-4ë¥¼ ì‚¬ìš©í•˜ì—¬ C í”„ë¡œì íŠ¸ ë¹Œë“œ ë°©ë²• ìë™ ê²°ì •
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„                â”‚
â”‚ 2. ë¹Œë“œ ì‹œìŠ¤í…œ ì‹ë³„                  â”‚
â”‚ 3. ì˜ì¡´ì„± ì„¤ì¹˜                       â”‚
â”‚ 4. ë¹Œë“œ ì‹¤í–‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì£¼ìš” ì†ì„±:
- model: "gpt-4o-2024-05-13"
- tool_lib: [run_make, run_cmake, run_gcc, apt_install]
- init_prompt: C ì „ìš© ì§€ì‹œì‚¬í•­
```

**ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš°:**
```
Configuration Agent
  â”‚
  â”œâ”€> LLMì— í”„ë¡œì íŠ¸ ì •ë³´ ì „ë‹¬
  â”‚   â””â”€> "Makefileì´ ìˆëŠ” C í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ì„¸ìš”"
  â”‚
  â”œâ”€> LLMì´ ëª…ë ¹ ìƒì„±
  â”‚   â””â”€> "run_make" ë˜ëŠ” "run_cmake" ë˜ëŠ” "run_gcc"
  â”‚
  â”œâ”€> Sandboxì—ì„œ ëª…ë ¹ ì‹¤í–‰
  â”‚   â””â”€> Docker ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ë¹Œë“œ
  â”‚
  â””â”€> ê²°ê³¼ í™•ì¸
      â””â”€> ì„±ê³µ ì‹œ "Congratulations!" ë©”ì‹œì§€
```

---

### **3. build_agent/tools/** - C ë¹Œë“œ ë„êµ¬ë“¤

#### **run_make.py** (45ì¤„)
```python
ì—­í• : Makeë¥¼ ì‚¬ìš©í•œ C í”„ë¡œì íŠ¸ ë¹Œë“œ

def run_make():
    """Makefileì´ ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ makeë¡œ ë¹Œë“œ"""
    subprocess.run(['make'], cwd='/repo', timeout=300)
    
ì‚¬ìš© ì¡°ê±´:
- Makefileì´ ì¡´ì¬
- í‘œì¤€ make ëª…ë ¹ìœ¼ë¡œ ë¹Œë“œ ê°€ëŠ¥

ì˜ˆì‹œ:
  /repo/Makefile 
    â””â”€> make ì‹¤í–‰
          â””â”€> hello ì‹¤í–‰íŒŒì¼ ìƒì„±
```

#### **run_cmake.py** (56ì¤„)
```python
ì—­í• : CMakeë¥¼ ì‚¬ìš©í•œ C í”„ë¡œì íŠ¸ ë¹Œë“œ

def run_cmake():
    """CMakeLists.txtê°€ ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ cmakeë¡œ ë¹Œë“œ"""
    subprocess.run(['cmake', '.'], cwd='/repo')
    subprocess.run(['make'], cwd='/repo')
    
ì‚¬ìš© ì¡°ê±´:
- CMakeLists.txtê°€ ì¡´ì¬
- cmake ì„¤ì • í›„ makeë¡œ ë¹Œë“œ

ì˜ˆì‹œ:
  /repo/CMakeLists.txt
    â””â”€> cmake . ì‹¤í–‰
          â””â”€> make ì‹¤í–‰
                â””â”€> ì‹¤í–‰íŒŒì¼ ìƒì„±
```

#### **run_gcc.py** (60ì¤„)
```python
ì—­í• : GCCë¥¼ ì§ì ‘ ì‚¬ìš©í•œ ë‹¨ìˆœ ì»´íŒŒì¼

def run_gcc():
    """Makefileì´ ì—†ëŠ” ë‹¨ìˆœ C íŒŒì¼ë“¤ì„ gccë¡œ ì»´íŒŒì¼"""
    c_files = glob.glob('/repo/*.c')
    subprocess.run(['gcc', '-o', 'hello'] + c_files)
    
ì‚¬ìš© ì¡°ê±´:
- Makefileì´ë‚˜ CMakeLists.txtê°€ ì—†ìŒ
- ë‹¨ìˆœí•œ .c íŒŒì¼ë“¤ë§Œ ì¡´ì¬

ì˜ˆì‹œ:
  /repo/main.c
    â””â”€> gcc -o hello main.c ì‹¤í–‰
          â””â”€> hello ì‹¤í–‰íŒŒì¼ ìƒì„±
```

#### **apt_install.py** (53ì¤„)
```python
ì—­í• : ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜

def apt_install(package_name):
    """C í”„ë¡œì íŠ¸ê°€ í•„ìš”ë¡œ í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜"""
    subprocess.run(['apt-get', 'update'])
    subprocess.run(['apt-get', 'install', '-y', package_name])
    
ì‚¬ìš© ì˜ˆì‹œ:
- apt_install libssl-dev
- apt_install zlib1g-dev
- apt_install libcurl4-openssl-dev
```

---

### **4. build_agent/utils/** - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤

#### **sandbox.py** (205ì¤„) - Docker ì»¨í…Œì´ë„ˆ ê´€ë¦¬
```
ì—­í• : Docker ì»¨í…Œì´ë„ˆ ìƒì„±, ê´€ë¦¬, ëª…ë ¹ ì‹¤í–‰

ì£¼ìš” í´ë˜ìŠ¤:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session                            â”‚
â”‚  - execute()        : ëª…ë ¹ ì‹¤í–‰    â”‚
â”‚  - _execute_make()  : make ì‹¤í–‰    â”‚
â”‚  - _execute_cmake() : cmake ì‹¤í–‰   â”‚
â”‚  - _execute_gcc()   : gcc ì‹¤í–‰     â”‚
â”‚  - _execute_apt()   : apt ì‹¤í–‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sandbox                            â”‚
â”‚  - generate_dockerfile()           â”‚
â”‚  - start_container()               â”‚
â”‚  - stop_container()                â”‚
â”‚  - get_session()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Sandbox ì›Œí¬í”Œë¡œìš°:**
```
Sandbox ìƒì„±
  â”‚
  â”œâ”€> generate_dockerfile()
  â”‚   â””â”€> FROM gcr.io/oss-fuzz-base/base-builder
  â”‚       RUN mkdir -p /repo
  â”‚
  â”œâ”€> start_container()
  â”‚   â”œâ”€> docker build -t c-build-{name} .
  â”‚   â”œâ”€> docker run -d --name {container} ...
  â”‚   â””â”€> docker cp {repo}/. {container}:/repo/
  â”‚
  â”œâ”€> execute() [ì—¬ëŸ¬ ë²ˆ]
  â”‚   â”œâ”€> run_make ë˜ëŠ”
  â”‚   â”œâ”€> run_cmake ë˜ëŠ”
  â”‚   â””â”€> run_gcc
  â”‚
  â””â”€> stop_container()
      â”œâ”€> docker logs {container}
      â”œâ”€> docker stop {container}
      â””â”€> docker rm {container}
```

#### **llm.py** (39ì¤„) - LLM ì¸í„°í˜ì´ìŠ¤
```python
ì—­í• : OpenAI GPT-4 API í˜¸ì¶œ

def get_llm_response(model, messages, temperature=0.0):
    """GPT-4ì— ë©”ì‹œì§€ ì „ì†¡í•˜ê³  ì‘ë‹µ ë°›ê¸°"""
    client = openai.OpenAI()
    response = client.chat.completions.create(
        model=model,
        messages=messages,
        temperature=temperature
    )
    return response.choices[0].message.content
```

#### **tools_config.py** (44ì¤„) - ë„êµ¬ ì •ì˜
```python
ì—­í• : Configuration Agentê°€ ì‚¬ìš©í•  ë„êµ¬ ëª©ë¡ ì •ì˜

class Tools(Enum):
    run_make = {
        "command": "run_make",
        "description": "Build C project using make"
    }
    run_cmake = {...}
    run_gcc = {...}
    apt_install = {...}
```

#### **integrate_dockerfile.py** (85ì¤„) - Dockerfile ìƒì„±
```
ì—­í• : ë¹Œë“œ ì„±ê³µ í›„ ì¬í˜„ ê°€ëŠ¥í•œ Dockerfile ìƒì„±

def integrate_dockerfile(root_path):
    """ì‹¤í–‰ëœ ëª…ë ¹ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ ìµœì¢… Dockerfile ìƒì„±"""
    
ìƒì„±ë˜ëŠ” Dockerfile êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FROM gcr.io/oss-fuzz-base/base-builderâ”‚
â”‚ RUN git clone https://github.com/... â”‚
â”‚ RUN git checkout {sha}                â”‚
â”‚ RUN make                              â”‚  â† ì„±ê³µí•œ ë¹Œë“œ ëª…ë ¹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **agent_util.py** (98ì¤„) - ì—ì´ì „íŠ¸ ìœ í‹¸ë¦¬í‹°
```python
ì—­í• : ì—ì´ì „íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ í•¨ìˆ˜ë“¤

ì£¼ìš” í•¨ìˆ˜:
- extract_commands()  : bash ì½”ë“œ ë¸”ë¡ì—ì„œ ëª…ë ¹ ì¶”ì¶œ
- extract_diffs()     : diff ë¸”ë¡ ì¶”ì¶œ
- safe_cmd()          : ì•ˆì „í•œ ëª…ë ¹ì¸ì§€ í™•ì¸
- append_trajectory() : ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥
```

#### **easylist.py** (87ì¤„) - ë¦¬ìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
```python
ì—­í• : ê°„ë‹¨í•œ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ í´ë˜ìŠ¤ (ë²”ìš© ìœ í‹¸ë¦¬í‹°)

class EasyList:
    - add(), remove(), get()
    - sort(), reverse()
    - contains(), index_of()
```

---

## ğŸ”„ ì „ì²´ ì‹¤í–‰ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì‚¬ìš©ìê°€ ëª…ë ¹ ì‹¤í–‰                                   â”‚
â”‚    python build_agent/main.py owner/repo sha /path     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. main.py - download_repo()                           â”‚
â”‚    - git clone https://github.com/owner/repo.git       â”‚
â”‚    - git checkout {sha}                                â”‚
â”‚    - íŒŒì¼ ì¬êµ¬ì„±                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Sandbox ìƒì„±                                         â”‚
â”‚    - Dockerfile ìƒì„± (base-builder ê¸°ë°˜)               â”‚
â”‚    - Docker ì´ë¯¸ì§€ ë¹Œë“œ                                 â”‚
â”‚    - ì»¨í…Œì´ë„ˆ ì‹œì‘                                      â”‚
â”‚    - ë ˆí¬ì§€í† ë¦¬ íŒŒì¼ ë³µì‚¬ â†’ /repo/                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Configuration Agent ì‹¤í–‰                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ GPT-4ì— í”„ë¡¬í”„íŠ¸ ì „ì†¡:                        â”‚   â”‚
â”‚    â”‚ "C í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ì„¸ìš”. Makefileì´ ìˆìŠµë‹ˆë‹¤"â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â–¼                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ GPT-4 ì‘ë‹µ: "run_makeë¥¼ ì‹¤í–‰í•˜ì„¸ìš”"          â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â–¼                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ Sandbox.execute("run_make")                   â”‚   â”‚
â”‚    â”‚   â†’ docker exec {container} make              â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â–¼                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ ë¹Œë“œ ì„±ê³µ! hello ì‹¤í–‰íŒŒì¼ ìƒì„±ë¨              â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. integrate_dockerfile()                              â”‚
â”‚    - inner_commands.json ì½ê¸°                          â”‚
â”‚    - ì„±ê³µí•œ ëª…ë ¹ë“¤ì„ Dockerfileë¡œ ë³€í™˜                 â”‚
â”‚    - output/{owner}/{repo}/Dockerfile ìƒì„±             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ê²°ê³¼ë¬¼                                               â”‚
â”‚    output/{owner}/{repo}/                              â”‚
â”‚    â”œâ”€â”€ Dockerfile          (ì¬í˜„ ê°€ëŠ¥í•œ ë¹Œë“œ ë ˆì‹œí”¼)   â”‚
â”‚    â”œâ”€â”€ track.json         (LLM ëŒ€í™” íˆìŠ¤í† ë¦¬)          â”‚
â”‚    â”œâ”€â”€ inner_commands.json (ì‹¤í–‰ëœ ëª…ë ¹ë“¤)             â”‚
â”‚    â”œâ”€â”€ outer_commands.json (ì™¸ë¶€ ëª…ë ¹ë“¤)               â”‚
â”‚    â””â”€â”€ sha.txt            (Git commit SHA)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ í•µì‹¬ ì„¤ê³„ ì›ì¹™

### **1. ë‹¨ìˆœì„± (Simplicity)**
```
âŒ ë³µì¡í•œ Python ì˜ì¡´ì„± ë¶„ì„
âœ… ê°„ë‹¨í•œ C ë¹Œë“œ ë„êµ¬ë§Œ ì§€ì›

íŒŒì¼ ìˆ˜: 50+ â†’ 17ê°œ
ì½”ë“œ ì¤„ìˆ˜: 2500+ â†’ 1200ì¤„
```

### **2. ì§‘ì¤‘ì„± (Focus)**
```
âŒ Python + C ë©€í‹° ì–¸ì–´ ì§€ì›
âœ… C ì–¸ì–´ë§Œ ì§‘ì¤‘ ì§€ì›

ì§€ì› ë¹Œë“œ ì‹œìŠ¤í…œ:
- make
- cmake
- gcc (ì§ì ‘ ì»´íŒŒì¼)
```

### **3. ìë™í™” (Automation)**
```
ì‚¬ìš©ì ì…ë ¥: owner/repo + sha
ì‹œìŠ¤í…œ ì¶œë ¥: Dockerfile

ì¤‘ê°„ ê³¼ì •ì€ GPT-4ê°€ ìë™ ì²˜ë¦¬:
- í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„
- ë¹Œë“œ ë°©ë²• ê²°ì •
- ì˜ì¡´ì„± ì„¤ì¹˜
- ë¹Œë“œ ì‹¤í–‰
```

### **4. ì¬í˜„ì„± (Reproducibility)**
```
ìƒì„±ëœ Dockerfileë¡œ ì–¸ì œë“ ì§€ ê°™ì€ í™˜ê²½ ì¬í˜„ ê°€ëŠ¥

FROM gcr.io/oss-fuzz-base/base-builder
RUN git clone ...
RUN git checkout {exact_sha}
RUN make

â†’ í•­ìƒ ë™ì¼í•œ ê²°ê³¼
```

---

## ğŸ” ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ìƒí˜¸ì‘ìš©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       main.py                           â”‚
â”‚  (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° - ì „ì²´ í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨)                   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
    â”‚                         â”‚                       â”‚
    â–¼                         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sandbox  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Configurationâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ LLM (GPT-4) â”‚
â”‚          â”‚          â”‚   Agent     â”‚         â”‚              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                       â”‚
     â”‚                       â”‚
     â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Docker    â”‚      â”‚  Build Tools  â”‚
â”‚  Container  â”‚      â”‚  - run_make   â”‚
â”‚             â”‚      â”‚  - run_cmake  â”‚
â”‚             â”‚      â”‚  - run_gcc    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìƒí˜¸ì‘ìš© ì‹œí€€ìŠ¤:**
1. `main.py`ê°€ `Sandbox` ìƒì„±
2. `Sandbox`ê°€ Docker ì»¨í…Œì´ë„ˆ ì‹œì‘
3. `main.py`ê°€ `Configuration Agent` ì‹œì‘
4. `Configuration Agent`ê°€ `LLM`ì— ìš”ì²­
5. `LLM`ì´ ë¹Œë“œ ëª…ë ¹ ê²°ì •
6. `Configuration Agent`ê°€ `Sandbox`ì— ëª…ë ¹ ì „ë‹¬
7. `Sandbox`ê°€ Dockerì—ì„œ `Build Tools` ì‹¤í–‰
8. ê²°ê³¼ë¥¼ `Configuration Agent`ë¡œ ë°˜í™˜
9. ì„±ê³µ ì‹œ `integrate_dockerfile()` í˜¸ì¶œ

---

## ğŸ“Š ë°ì´í„° íë¦„

```
ì…ë ¥: owner/repo + commit_sha
  â”‚
  â”œâ”€> ë ˆí¬ì§€í† ë¦¬ ë‹¤ìš´ë¡œë“œ
  â”‚     â””â”€> utils/repo/{owner}/{repo}/repo/
  â”‚
  â”œâ”€> Docker ì»¨í…Œì´ë„ˆ ìƒì„±
  â”‚     â””â”€> /repo/ (ì»¨í…Œì´ë„ˆ ë‚´ë¶€)
  â”‚
  â”œâ”€> LLMì´ ë¹Œë“œ ëª…ë ¹ ìƒì„±
  â”‚     â””â”€> ["run_make", "apt_install libssl"]
  â”‚
  â”œâ”€> ëª…ë ¹ ì‹¤í–‰ ë° ê²°ê³¼ ì €ì¥
  â”‚     â””â”€> inner_commands.json
  â”‚
  â””â”€> Dockerfile ìƒì„±
        â””â”€> output/{owner}/{repo}/Dockerfile

ì¶œë ¥ë¬¼:
  output/{owner}/{repo}/
    â”œâ”€â”€ Dockerfile          â† ì¬í˜„ ê°€ëŠ¥í•œ ë¹Œë“œ
    â”œâ”€â”€ track.json         â† LLM ëŒ€í™” ê¸°ë¡
    â”œâ”€â”€ inner_commands.json â† ì‹¤í–‰ ëª…ë ¹ ê¸°ë¡
    â””â”€â”€ sha.txt            â† Git commit SHA
```

---

## ğŸ› ï¸ í™•ì¥ í¬ì¸íŠ¸

### **ìƒˆ ë¹Œë“œ ì‹œìŠ¤í…œ ì¶”ê°€**
```python
# 1. tools/run_meson.py ìƒì„±
def run_meson():
    subprocess.run(['meson', 'setup', 'build'])
    subprocess.run(['ninja', '-C', 'build'])

# 2. tools_config.pyì— ì¶”ê°€
class Tools(Enum):
    run_meson = {
        "command": "run_meson",
        "description": "Build using Meson/Ninja"
    }

# 3. sandbox.pyì— í•¸ë“¤ëŸ¬ ì¶”ê°€
def _execute_meson(self):
    cmd = "docker exec {} bash -c 'cd /repo && meson setup build && ninja -C build'"
```

### **ìƒˆ ì–¸ì–´ ì§€ì› (ì˜ˆ: Rust)**
```
ìƒˆ í´ë” ìƒì„±: ARVO-Rust/
  - run_cargo.py (cargo build)
  - Rust ì „ìš© Configuration Agent
  - Rust ì „ìš© base image
```

---

## ğŸ“ ìš”ì•½

**ARVO2.0ì˜ ì•„í‚¤í…ì²˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìš”ì•½ë©ë‹ˆë‹¤:**

1. **ê³„ì¸µì  êµ¬ì¡°**: main.py â†’ Agent â†’ Sandbox â†’ Tools
2. **ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬**: ê° ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ ì—­í• ë§Œ ìˆ˜í–‰
3. **Docker ê¸°ë°˜ ê²©ë¦¬**: ëª¨ë“  ë¹Œë“œëŠ” ì»¨í…Œì´ë„ˆì—ì„œ ì•ˆì „í•˜ê²Œ ì‹¤í–‰
4. **LLM ìë™í™”**: GPT-4ê°€ ë¹Œë“œ ë°©ë²•ì„ ìë™ìœ¼ë¡œ ê²°ì •
5. **ì¬í˜„ ê°€ëŠ¥í•œ ê²°ê³¼**: Dockerfileë¡œ ì–¸ì œë“  ê°™ì€ í™˜ê²½ êµ¬ì¶•

**í•µì‹¬ ê°€ì¹˜: ë‹¨ìˆœí•¨, ì§‘ì¤‘ì„±, ìë™í™”, ì¬í˜„ì„±** ğŸš€
